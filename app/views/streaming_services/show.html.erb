<p>
  <%= link_to "一覧に戻る", streaming_services_path %></span>
</p>

<div class="row">
  <div class="col-11">
    <h1>連携中のストリーミングサービス「<%= @streaming_service.name %>」</h1>
  </div>
  <div class="col-1">
    <%= link_to "編集", edit_streaming_service_path(@streaming_service), class: "btn btn-success" %>
  </div>
</div>

<table class="table mb-4">
  <tr>
    <th>連携先</th>
    <td>
      <div>
        <%= @streaming_service.service_type %>
      </div>
    </td>
  </tr>
  <tr>
    <th>接続するデバイス</th>
    <td>
      <div>
        <% if @streaming_service.device %>
          <%= link_to @streaming_service.device.name, device_path(@streaming_service.device.unique_key) %>
          <%= wrap_device_status_with_style(status: @streaming_service.device.current_device_status_name) %>
        <% end %>
      </div>
    </td>
  </tr>
  <tr>
    <th>連携するリモートマクロのグループ</th>
    <td>
      <div>
        <% if @streaming_service.remote_macro_group %>
          <%= link_to @streaming_service.remote_macro_group.name, @streaming_service.remote_macro_group %>
        <% end %>
      </div>
    </td>
  </tr>
  <tr>
    <th></th>
    <td>
      <div>
        <%= link_to "Googleでログイン", "/auth/google_oauth2", method: :post %>
      </div>
    </td>
  </tr>
</table>

<h2>リモートマクロ一覧</h2>

<% @streaming_service.remote_macro_group.remote_macros.each do |remote_macro| %>
  <h4>
    <%= remote_macro.name %>(<%= remote_macro.steps %>)
  </h4>

  <p>トリガーワード</p>
  <ul>
    <% remote_macro.trigger_word_list.each do |word| %>
      <li><%= word %></li>
    <% end %>
  </ul>

  <% remote_macro.trigger_word_list.each do |word| %>
    <div class="alert alert-info">
      <%= URI.decode_www_form_component api_device_streaming_service_enqueue_pbm_remote_macro_jobs_url(@streaming_service.device&.uuid || ":uuid", @streaming_service.unique_key, word) %>
    </div>
  <% end %>
<% end %>
